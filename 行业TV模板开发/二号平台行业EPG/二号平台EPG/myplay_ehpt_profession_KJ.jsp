<%@ page language="java" import="java.util.*" pageEncoding="utf-8"%><%@ page import="org.apache.log4j.Logger" %><%@ page import="com.besto.util.CommonInterface" %><%@ page import="org.json.*" %><%@ page import="java.net.URLDecoder" %><%@ page language="java" import="javax.servlet.http.HttpSession" %><%@ page language="java" import="com.besto.util.SecurityTools" %><%@ page language="java" import="com.besto.util.ReadProperties" %><%@ page language="java" import="com.besto.util.TurnPage" %><%@ page language="java" import="com.besto.util.AESUtil"%><%@ page language="java" import="java.util.List" %><%@ page language="java" import="java.text.SimpleDateFormat"%><%@ page language="java" import="com.besto.util.AESUtil"%><%@ page language="java" import="com.besto.util.Base64"%><%@ page language="java" import="com.besto.util.Decryptor"%><%@ page language="java" import="com.besto.util.Encryptor"%><%@ page language="java" import="com.besto.util.MD5"%><%@ page import="java.net.URLEncoder"%><%@ page import="org.dom4j.Document"%><%@ page import="org.dom4j.Element"%><%@ page import="org.dom4j.DocumentHelper"%><%@ page import="javax.servlet.http.Cookie"%><%	String path = request.getContextPath();	String filepath = ""; // 文件路径	String intpath = ""; // 读取配置文件中的接口地址	try {			filepath = this.getClass().getClassLoader().getResource("interface.properties").toURI().getPath();		} catch (Exception e) {				e.printStackTrace();	}	SecurityTools st = new SecurityTools();	String key = "besto";		String isfourkpian = "";	long time = System.currentTimeMillis();	Properties properties = ReadProperties.readProperties(filepath);   intpath = properties.get("cmsGetCode").toString();	String returnurl= request.getParameter("returnurl");//返回地址和参数String returnurl11[] = returnurl.split("macode=");String returnurl12 = returnurl11[returnurl.split("macode=").length - 1];String code1 = returnurl12.substring(0,32);  intpath= intpath+"?time="+time+"&riddle="+ st.encrypt(key + time)+"&vo.code="+code1+"&vo.providerid=zx";String asdassd = CommonInterface.getInterface(intpath);	JSONObject jsonObjecwqeqwt = new JSONObject(asdassd);	int service1Flag =0;	String nextCode ="";	String preCode ="";	String serviceflag = jsonObjecwqeqwt.getString("seriesflag");	    nextCode = jsonObjecwqeqwt.getString("next");      preCode = jsonObjecwqeqwt.getString("pre");	if("1".equals(serviceflag)){		service1Flag =0;    nextCode = jsonObjecwqeqwt.getString("next");      preCode = jsonObjecwqeqwt.getString("pre");	}else{	service1Flag =1;		}%><%Logger logger = Logger.getLogger(CommonInterface.class);//中兴播放器String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+request.getContextPath()+"/";String mediastr= request.getParameter("mediastr");//返回地址和参数logger.info("===============================mediastr:"+nextCode+"---"+code1);//String mediaUrl="[{mediaUrl:%22rtsp://218.24.21.4:554/vod/00000050280004567982.mpg?userid=guanglianhd02&stbip=61.161.172.11&clienttype=1&mediaid=0000000030010003807187&ifcharge=1&time=20171229161740+08&life=172800&usersessionid=5616&vcdnid=vcdn002&boid=002&srcboid=002&columnid=05060M00&backupagent=218.24.21.4:554&ctype=50&playtype=0&Drm=0&EpgId=epg_nj_003&programid=00000050280004567982&contname=&fathercont=&bp=0&authid=0&tscnt=0&tstm=0&tsflow=0&ifpricereqsnd=1&nodelevel=3&usercharge=E135D5AA33F9848A9B2E3DAEC1C81796%22,mediaCode:%20%22code1%22,mediaType:2,audioType:1,videoType:1,streamType:1,drmType:1,fingerPrint:0,copyProtection:1,allowTrickmode:1,startTime:0,endTime:0,entryID:%22entry1%22}]";//////String mediaUrl="";JSONObject resJsonadd = null;if(!"".equals(mediastr)&&mediastr!=null){ 	resJsonadd = new JSONObject(mediastr.replace("[","").replace("]",""));	mediaUrl = resJsonadd.getString("mediaUrl");}//mediaUrl ="rtsp://218.24.21.4:554/vod/00000050280004567982.mpg?userid=guanglianhd02&stbip=61.161.172.11&clienttype=1&mediaid=0000000030010003807187&ifcharge=1&time=20171229161740+08&life=172800&usersessionid=5616&vcdnid=vcdn002&boid=002&srcboid=002&columnid=05060M00&backupagent=218.24.21.4:554&ctype=50&playtype=0&Drm=0&EpgId=epg_nj_003&programid=00000050280004567982&contname=&fathercont=&bp=0&authid=0&tscnt=0&tstm=0&tsflow=0&ifpricereqsnd=1&nodelevel=3&usercharge=E135D5AA33F9848A9B2E3DAEC1C81796";//能播出//returnurl= "http://202.97.183.145:9090/templetsaqy/souhu/index.jsp";//返回地址和参数logger.info("=================returnurl:"+returnurl);logger.info("=================mediaUrl:"+mediaUrl);%><HTML xmlns="http://www.w3.org/TR/REC-html40" xmlns:v = "urn:schemas-microsoft-com:vml" xmlns:o = "urn:schemas-microsoft-com:office:office"><HEAD><TITLE>Play</TITLE><META http-equiv=Content-Language content=zh-cn><META http-equiv=Content-Type content="text/html; charset=utf-8"><META content="MSHTML 6.00.2800.1522" name=GENERATOR><meta name="Page-View-Size" content="1280*720"><link rel="stylesheet" type="text/css" href="playcss/play.css" /><style type="text/css">#ad_downtimes{position:absolute; color:#FFFFFF; line-height:30px; left:460px; top:10px; background-image:url(playimages/djsbg.png); text-align:center; width:180px; height:30px;}        /* 倒计时*/.ad2{position:absolute; width:300px; height:375px; z-index:30;}       /*返回图片层*/.ad4{position:absolute; width:640px; height:530px; top:23px; left:40px;z-index:10;}  /*视频广告后的3秒图片层*/#bottom { position:absolute;z-index:9999; bottom:0px; top:440px; background-color:#E6E8FA; width:640px; height:86px; display:none;} #left{position:absolute; z-index:9999; background-color:#0573a6; width:110px; height:440px; top:0px; filter:gray;opacity:0.4;display:none;}#left_xia{position:absolute; z-index:9999; width:88px; height:250px; top:204px; background-color:#0033FF;display:none;}img{ border:0px;}a{ text-decoration:none; color:#FFFFFF;}a:link{ text-decoration:none; color:#FFFFFF;}a:hover{ text-decoration:none; color:#FFFFFF;}.bb1{ font-size:22px; color: #b6c3d6;}.bb2{ font-size:22px; color: #b6c3d6;}.bb3{ font-size:22px; color: #b6c3d6;}.bb4{ font-size:24px; color:#FFFFFF;}.bb5{ font-size:22px; color:#FFFFFF;}.bb6{ font-size:22px; color:#FFFFFF;}.orange{ color:#ff9900;}.red{ color:#ff3333}.green{ color:#33ff00;}body,td,th {	font-family: "微软雅黑";	font-size: 22px;}.livebg li{ padding-left:5px; padding-right:5px; text-align:center; line-height:45px; height:45px; color:#8c8c8c; font-size:16px; float:left;}.livebg li:hover{padding-left:5px; padding-right:5px;  height:45px; text-align:center;  background:#0b9aca; float:left; color:#FFFFFF;}.livebg li a{ color:#8c8c8c; text-decoration:none}.livebg li:hover{color:#fff; text-decoration:none}	#mgs_bq{		width:640px;		height:32px;		position:absolute;		left:0;		top:20px;		}	#mgs_bj{		width:86px;		height:32px;		position:absolute;		left:535px;		top:0;		}	#mgs_word{		width:76px;		height:32px;		font-size:24px;		color:#ffffff;    	font-family: "Microsoft YaHei", Arial;		position:absolute;		left:0;		top:0;		text-align:right;		line-height:32px;		}</style><script type="text/javascript">	function toSeconds(str) {    		var ss = str.split(':')    		 return ss[0] * 3600 + ss[1] * 60 + ss[2] * 1    	}    function timeFormat(time)    {        var newTime,        hour,        minite,        seconds;        if (time >= 3600) {            hour = parseInt(time / 3600) < 10 ? '0' + parseInt(time / 3600) : parseInt(time / 3600);            minite = parseInt(time % 60 / 60) < 10 ? '0' + parseInt(time % 60 / 60) : parseInt(time % 60 / 60);            seconds = time % 3600 < 10 ? '0' + time % 3600 : time % 3600;            newTime = hour + ':' + minite + ':' + seconds;        } else if (time >= 60 && time < 3600) {            minite = parseInt(time / 60) < 10 ? '0' + parseInt(time / 60) : parseInt(time / 60);            seconds = time % 60 < 10 ? '0' + time % 60 : time % 60;            newTime = '0:' + minite + ':' + seconds;        } else if (time < 60) {            seconds = time < 10 ? '0' + time: time;            newTime = '0:00:' + seconds;        }        return newTime;    }</script><script type="text/javascript" src="playjs/tohhmmss.js"></script><script type="text/javascript" src="playjs/movievolumevod.js"></script>   <!--视频的音量条的js--><script type="text/javascript" src="playjs/vodPlayKeyBorad_pro.js"></script><script type="text/javascript" src="playjs/md5.js"></script><script src="http://218.24.37.2:81/templets/epg/js/data/ad/iptv_hyls.js" charset="GB2312"></script><script language="javascript"></script><script type="text/javascript">var mediaUrl="<%=mediaUrl%>";var returnurl="<%=returnurl%>";var playurl = mediaUrl;       // 视频的播放地址Authentication.CTCSetConfig("ProfessionFlag","true1111");var  ProfessionURL = Authentication.CTCGetConfig("ProfessionURL");function onLoadMehtod(){	newPlay('0',playurl);   //直接播放电影视频         setTimeout(function(){	top.mp.stop();   top.location.href = ProfessionURL;    },15000)}</script><SCRIPT language="JavaScript"  >            var tempstr ='&providerid=zx';             var dataurl = "";   function getGGData(iptv_jpad) {        var platesgd = iptv_jpad.position;    var adversgd = platesgd[0].plate;   var adressgd = adversgd[0].advertising;   var bcd = adressgd.length;   for(var i = 0;i<1;i++){   var adstrgd = adressgd[i].adstrategy;    if (typeof(adstrgd[0]) == "undefined"|| null ==adstrgd[0])    {        continue;    }   var adregd = adstrgd[0].adresource;   var pic = adregd[0].imgurl;   var title = adregd[0].title;    dataurl =adregd[0].actionUrl;    var actionType = adregd[0].actiontype;   var dataclassic = adregd[0].description;   var code = adregd[0].guid;   var categoryid =adregd[0].categoryid;   if(actionType=="2"){     dataurl = "/templets/epg/Profession/det_tz.jsp?providerid=zx&code="+code+"&category_id="+categoryid+tempstr;   }       }document.getElementById("img1").src = pic;}var mp;var NativePlayerInstanceID; var playstatus = "play";        //播放状态    play：播放 / pause：暂停 var tiaoZhanStatus = false;   // 跳转到指定的时间播放的图层var show_progress = false;    // 进度条的显示标识var presscount=1;var presscountshow=1;var movieInfo = false;          // 按确认键后，出现的影片信息的标识function goUtility()		//0x300虚拟按键事件响应{	eval("eventJson = " + Utility.getEvent());	var typeStr = eventJson.type;	switch (typeStr)	{	case "EVENT_MEDIA_END":    // 当前媒体资源文件播放结束	if('<%=service1Flag%>'==1){	playNext();	}else{	document.getElementById('CountDown').style.display = 'block'		// document.getElementById('CountDown').innerHTML = '8秒后进入下一集'		// setTimeout(function(){		// 	playNext();			// },8000)		document.getElementById('surefocusCD').focus()		countDown = true		var sec = 0		setInterval(function(){			document.getElementById('CountDown').getElementsByTagName('div')[0].innerHTML = (8-sec)+'秒后进入下一集'			sec++			if(sec == 9){				playNext();				}					},1000)		break;	}	}	return true;}function play_tz(){	top.mp.stop();  window.location.href = dataurl;} var service1flag1 = "<%=service1Flag%>"; var nextCode1 = "<%=nextCode%>"; var preCode1 = "<%=preCode%>";//自动播放下一集function playNext(){	if('<%=service1Flag%>'==1){		mp.stop();    returnurl = returnurl.replace(/\*/g,"&");	parent.location.href= returnurl;//返回首页	}else{	   var nextCode = "<%=nextCode%>";		var curNextUrl="play_ehpt_profession.jsp?code="+nextCode+"&backurl="+returnurl;	parent.location.href= curNextUrl;		  if(nextCode=="0"){	  		mp.stop();	returnurl = returnurl.replace(/\*/g,"&");	parent.location.href= returnurl;//返回首页	  }	} }function playPre(){	if('<%=service1Flag%>'==1){		mp.stop();    returnurl = returnurl.replace(/\*/g,"&");	parent.location.href= returnurl;//返回首页	}else{	   var preCode = "<%=preCode%>";		var curNextUrl="play_ehpt_profession.jsp?code="+preCode+"&backurl="+returnurl;	parent.location.href= curNextUrl;		  if(preCode=="0"){	  		mp.stop();	returnurl = returnurl.replace(/\*/g,"&");	parent.location.href= returnurl;//返回首页	  }	}}    function toJson(url){ 	return '[{mediaUrl:"'+url	+'",mediaCode:"code1",'	+'mediaType:2,'	+'audioType:1,'	+'videoType:1,'	+'streamType:1,'	+'drmType:1,'	+'fingerPrint:0,'	+'copyProtection:1,'	+'allowTrickmode:1,'	+'startTime:0,'	+'endTime:0,'	+'entryID:"entry1"}]';			}//电影视频function newPlay(times,playurl){	document.getElementById("apDiv13").style.display = "block";   // 影片的信息图层    bb('info');    document.getElementById("myplayreturnid").focus();	var mediaStr = toJson(playurl);	mp = new MediaPlayer();		NativePlayerInstanceID = mp.getNativePlayerInstanceID(); 	mp.setAllowTrickmodeFlag(0);		//0允许媒体快进，快退，暂停    mp.setProgressBarUIFlag(0);  	mp.setChannelNoUIFlag(1);				//0不使频道号本地显示					1本地显示	mp.setNativeUIFlag(1);					//0不使UI本地显示							1本地显示	mp.setMuteUIFlag(1);						//0静音图标不显示							1本地显示	mp.setAudioVolumeUIFlag(1);			//设置音量调节本地UI的显示标志 0:不允许 1：允许	mp.setAudioTrackUIFlag(1);			//设置音轨本地UI的显示标志		1: 允许	mp.setVideoDisplayArea(0,0,1280,720); //mp.setVideoDisplayArea(15,110,304,229); 	mp.refreshVideoDisplay(); 	mp.setSingleMedia(mediaStr);    mp.playFromStart();      mp.playByTime(1,times);          //mp.playByTime(0.3,0.2);    // 从指定的时间播放视频	}function getPlayTime() {return mp.getCurrentPlayTime();}function KEY_PLAY(){       //  暂停/播放的方法		//window.clearTimeout(playimgtimeout);    // 清除掉timeout（右上角图标的图层）		if (playstatus =="play"){			/**-------------播放状态，暂停事件处理事件------------------**/		document.getElementById("hh").value = "";		document.getElementById("mm").value = "";		document.getElementById("error").innerHTML = "";		show_progress = true;    // 进度条的显示标识		        //setInter();  // 循环调用进度条的图层的方法			document.getElementById("volume").style.visibility = "hidden";   //  影片音量的图层隐藏		document.getElementById("apDiv13").style.display = "none";   // 影片的信息图层	    //document.getElementById("apDiv10").style.display = "none";   // 影片的信息图层	    document.getElementById("apDiv14").style.display="none";    // 显示返回时的图层		document.getElementById("apDiv101").style.display = "block";  // 显示跳转到指定时间的图层		document.getElementById('surefocus').focus();		//document.getElementById("pause").style.display = "block";   // 影片的信息图				tiaoZhanStatus = true;   // 跳转到指定时间图层的标识		tiaoZhanTimeOut();  // 跳转到指定时间的图层的显示时间		playstatus ="pause";  //赋值播放状态为 pause			setInter(presscount);  // 循环调用进度条的图层的方法		showbar();    // 显示进度条			mp.pause();   // 视频暂停		document.getElementById("play_Div12").innerHTML="";			document.getElementById("rppp").innerHTML='<img src="./img/play.png">';			if(isrecom) {			hidebar();		}	}else if (playstatus=="pause"){		    		show_progress = false;    // 进度条的显示标识				playstatus ="play";  //赋值播放状态为 play				mp.resume();				presscount=1;				document.getElementById("volume").style.visibility = "hidden";   //  影片音量的图层隐藏		document.getElementById("apDiv13").style.display = "none";   // 影片的信息图层	    document.getElementById("apDiv10").style.display = "none";   // 影片的信息图层	    document.getElementById("apDiv14").style.display="none";    // 显示返回时的图层		document.getElementById("apDiv101").style.display = "none";  // 显示跳转到指定时间的图层		hidebar();    // 隐藏进度条		playImg();			document.getElementById("rppp").innerHTML='<img src="./img/pause.png">';		}else if (playstatus=="pause1"){	    		show_progress = false;    // 进度条的显示标识			playstatus ="play";  //赋值播放状态为 play				mp.resume();				presscount=1;				document.getElementById("volume").style.visibility = "hidden";   //  影片音量的图层隐藏		document.getElementById("apDiv13").style.display = "none";   // 影片的信息图层	    document.getElementById("apDiv10").style.display = "none";   // 影片的信息图层	    document.getElementById("apDiv14").style.display="none";    // 显示返回时的图层		document.getElementById("apDiv101").style.display = "none";  // 显示跳转到指定时间的图层		hidebar();    // 隐藏进度条		playImg();			}}function showbar(){ 	document.getElementById("apDiv10").style.display = "block"; }   // 显示进度条的图层// 隐藏进度条的图层function hidebar(){	document.getElementById("apDiv10").style.display = "none";	document.getElementById("apDiv13").style.display = "none";	document.getElementById("apDiv101").style.display = "none";	tiaoZhanStatus = false;   // 跳转到指定时间图层的标识} function playImg(){	var stime = 4;	var timeIntervalPlay = setInterval(function (){	  if (stime == 0) { 		  clearInterval(timeIntervalPlay);  		  show_progress = false;    // 进度条的显示标识		  hidebar();       // 隐藏进度条		  return; 		}		stime -= 1;	  }, 1000);}function setInter(){ 	setInterval("time()",500);}  // 循环调用进度条的图层的方法var s = 4;     //30秒var timeInterval;function bb(type){	timeInterval = setInterval('aa('+type+')', 1000);}function aa(type) {	if (s == 0) { 	  clearInterval(timeInterval);  	  movieInfo = true;	  document.getElementById("apDiv13").style.display="none";	  return; 	}	s -= 1;} function KEY_SPEED(){   // 视频快进        //如果影片信息层显示则屏蔽 快进快退        if(document.getElementById("apDiv13").style.display == "block"){        return;        }	    playstatus ="pause";  //赋值播放状态为 pause		document.getElementById("volume").style.visibility = "hidden";   //  影片音量的图层隐藏		document.getElementById("apDiv13").style.display = "none";   // 影片的信息图层		//document.getElementById("mgs_bq").style.display = "block";   // 影片的信息图层		show_progress = true;    // 进度条的显示标识		setInter(presscount);  // 循环调用进度条的图层的方法		showbar();    // 显示进度条		if(presscount == 1 || presscount < 0) {			mp.fastForward(2);			presscountshow = 2;			presscount = 2;		}else if(presscount == 2) {			mp.fastForward(4);			presscountshow = 4;			presscount = 3;		}else if(presscount == 3) {			mp.fastForward(8);			presscountshow = 8;			presscount = 4;		}else if(presscount == 4) {			mp.fastForward(16);			presscountshow = 16;			presscount = 5;		}else if(presscount == 5) {			mp.fastForward(32);			presscountshow = 32;			presscount = 6;		} else if(presscount == 6) {			presscountshow = 2;			presscount = 1;			KEY_PLAY();		}		setInterval(function(){			document.getElementsByClassName('rpnb')[0].style.width = ((toSeconds(document.getElementById('ctime').innerHTML)/toSeconds(document.getElementById('ttime').innerHTML)) * 300) +'px'		},1000)		document.getElementsByClassName('rpnb')[0].style.width = ((toSeconds(document.getElementById('ctime').innerHTML)/toSeconds(document.getElementById('ttime').innerHTML)) * 300) +'px'}function  KEY_REVERSE(){    // 视频后退        //如果影片信息层显示则屏蔽 快进快退        if(document.getElementById("apDiv13").style.display == "block"){        return;        }		playstatus ="pause";  //赋值播放状态为 pause		show_progress = true;    // 进度条的显示标识		setInter(presscount);  // 循环调用进度条的图层的方法		document.getElementById("volume").style.visibility = "hidden";   //  影片音量的图层隐藏		document.getElementById("apDiv13").style.display = "none";   // 影片的信息图层		//document.getElementById("mgs_down").style.display = "block";   // 影片的信息图层		showbar();    // 显示进度条					if(presscount > 0 || presscount == -1) {			mp.fastRewind(-2);			presscountshow = -2;			presscount = -2;		} else if(presscount == -2) {			mp.fastRewind(-4);			presscountshow = -4;			presscount = -3;		}else if(presscount == -3){			mp.fastRewind(-8);			presscountshow = -8;			presscount = -4;		}else if(presscount == -4){			mp.fastRewind(-16);			presscountshow = -16;			presscount = -5;		} else if(presscount == -5){			mp.fastRewind(-32);			presscountshow = -32;			presscount = -6;		} else if(presscount == -6) {			presscount = 1;			presscountshow = -2;			KEY_PLAY();		}		document.getElementsByClassName('rpnb')[0].style.width = ((toSeconds(document.getElementById('ctime').innerHTML)/toSeconds(document.getElementById('ttime').innerHTML)) * 300) +'px'}// 进度条中添加问跳转时间后按确定按钮触发的事件function submittime(){	if(document.getElementById("mm").value!=""){	    var videoleg = time_To_hhmmss(mp.getMediaDuration());    // 获取视频的总长度 hh:mm:ss		var hh = time_To_hhmmss(mp.getMediaDuration()).substring(0,2);  // 视频总长度的小时数		var mm = time_To_hhmmss(mp.getMediaDuration()).substring(3,5);  // 视频总长度的分钟数		var ss = time_To_hhmmss(mp.getMediaDuration()).substring(6,8);  // 视频总长度的秒数		// 获取视频总长度（分钟）		var hh_mm_ss = parseInt(hh)*60 + parseInt(mm)*1 + parseInt(ss)/60;   	    if(document.getElementById("hh").value == null || document.getElementById("hh").value == ""){document.getElementById("hh").value = "00";}		if(document.getElementById("mm").value == null || document.getElementById("mm").value == ""){document.getElementById("mm").value = "00";}	    var hh_mm_ss_input = parseInt(document.getElementById("mm").value) + (parseInt(document.getElementById("hh").value) *60);		if(hh_mm_ss_input<=hh_mm_ss){			show_progress = false;    // 进度条的显示标识			hidebar();      // 显示进度条			playstatus = "play";     //播放状态    play：播放 / pause：暂停 			mp.playByTime(1,hh_mm_ss_input*60);  				}else{document.getElementById("error").innerHTML = "时间输入不合理，请重新输入";}	}else{		document.getElementById("error").innerHTML = "请输入时间";	}}// 进度条中的取消按钮触发的时间function quxiao_bar(){    // 进度条跳转时的取消按钮	document.getElementById("hh").value = "";    document.getElementById("mm").value = "";    document.getElementById("apDiv101").style.display = "none";    // 隐藏跳转图层    KEY_PLAY();}// 进度条function time(){        	var durtime = mp.getMediaDuration();          // 电影的总时长		var curtime = mp.getCurrentPlayTime();        // 电影播放的时间点    // 获取时间的百分比数字    var numdouble = (curtime/durtime*100)+"";     	var numIntstr = numdouble.substring(numdouble.indexOf(".")+1,numdouble.indexOf(".")+2);   // 获取百分比数字小数点后的数字	var numInt = parseInt(numIntstr);   		var num = parseInt((curtime/durtime)*100);		if(numInt >= 5){    // 判断小数点后的数字是否大于5（四舍五入）			num = num + 1;		}		var numstr = num + "%";		document.getElementById("barimg").style.width = numstr;          // 进度条上面蓝线的长度	document.getElementById("valcurtime").innerHTML = num + "%";     // 获取进度条上面的当前时间的值     	document.getElementById("endtime").innerHTML = time_To_hhmmss(durtime);    // 获取进度条的图层对象后面的时间	 // 百分比的图层上面的值	 //document.getElementById("play_Div12").innerHTML = time_To_hhmmss(curtime)+ " " + presscountshow + "X"; 	if(playstatus=="play"){		document.getElementById("play_Div12").innerHTML = time_To_hhmmss(curtime);	}else if (playstatus=="pause"){		document.getElementById("play_Div12").innerHTML = time_To_hhmmss(curtime)+ " " + presscountshow + "X"; 	}else if (playstatus=="pause1"){		document.getElementById("play_Div12").innerHTML = time_To_hhmmss(curtime);//+ " " + presscountshow + "X"; 	}	document.getElementById("play_Div12").style.left =10 +  1 * (num);}// 返回图层的退出按钮事件function tuichu(){	mp.stop();	returnurl = returnurl.replace(/\*/g,"&");	window.location.href= returnurl;//返回首页}	function setCookie(name,value)	{		document.cookie = name + "="+ escape (value) + ";expires=";	}	function getCookie(name)	{		var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");		if(arr=document.cookie.match(reg))		return unescape(arr[2]);		else		return null;	}	var  ASEname = getCookie("name1");	var name11 = uncompile(ASEname);// 返回图层中的退出按钮触发的事件          var pwd = "gdyzs";		function uncompile(str) {			if (str == null || str.length < 8) {				return;			}			if (pwd == null || pwd.length <= 0) {				return;			}			var prand = "";			for (var i = 0; i < pwd.length; i++) {				prand += pwd.charCodeAt(i).toString();			}			var sPos = Math.floor(prand.length / 5);			var mult = parseInt(prand.charAt(sPos) + prand.charAt(sPos * 2)					+ prand.charAt(sPos * 3) + prand.charAt(sPos * 4)					+ prand.charAt(sPos * 5));			var incr = Math.round(pwd.length / 2);			var modu = Math.pow(2, 31) - 1;			var salt = parseInt(str.substring(str.length - 8, str.length), 16);			str = str.substring(0, str.length - 8);			prand += salt;			while (prand.length > 10) {				prand = (parseInt(prand.substring(0, 10)) + parseInt(prand						.substring(10, prand.length))).toString();			}			prand = (mult * prand + incr) % modu;			var enc_chr = "";			var enc_str = "";			for (var i = 0; i < str.length; i += 2) {				enc_chr = parseInt(parseInt(str.substring(i, i + 2), 16)						^ Math.floor((prand / modu) * 255));				enc_str += String.fromCharCode(enc_chr);				prand = (mult * prand + incr) % modu;			}			return enc_str;		}function jixu(){ 		helpMessage = false;      //帮助图层     	backInfo = false;         // 返回的图层	show_progress = false;   // 进度条	playstatus ="play";  //赋值播放状态为 play	//document.getElementById("help").style.display = "none";      // 隐藏帮助层    document.getElementById("apDiv14").style.display = "none";     // 隐藏返回层	document.getElementById("apDiv10").style.display = "none";     // 隐藏进度条层	document.getElementById("apDiv13").style.display = "none";     // 隐藏返回层	document.getElementById("apDiv101").style.display = "none";    // 隐藏跳转图层	tiaoZhanStatus = false;   // 跳转到指定时间图层的标识	//showapDiv15(1);         // 显示右上角的播放图标	playImg();	    mp.resume();        document.getElementById('rightPop').style.display = 'none';	isrecom = false;}</SCRIPT></HEAD><BODY bgcolor=transparent onUnload="closeMp()" onLoad="onLoadMehtod();MM_preloadImages('playimages/jsgk1.png','playimages/jxgk1.png','playimages/sure1.png','playimages/quxiao1.png')" ><!-- 右侧弹出 --><style>	* { padding: 0; margin:0;}	#rightPop { position: absolute; height: 720px; width: 350px; display: none; background: url('./img/ctbg.png') no-repeat; top: 0; right: 0; }	.recImg {        width: 300px;        height: 450px;        background: red;        margin: 20px auto;    }    .recImg img {    	padding: 0;    	margin: 0;    }    #controlD {    	text-align: center;    }    #controlD a {      color:#fff;      display: inline-block;      margin:0 10px;    }    .rpwb {    	width: 300px;    	height: 10px;    	background:#eee;    	position: relative;    	margin:auto;    	margin-top: 30px;    }    .rpwb .rpnb {    	position: absolute;    	left: 0; top: 0;    	height: 10px;    	background: red;    	width: 0px;    }    #timeshow {    	overflow: hidden;    	width: 300px;    	margin: auto;    }    #ttime, #ctime { color: #fff; }    #ttime {    	float: right;    }    #ctime {    	float: left;    }</style><div id="rightPop">	<h3 style="width: 100%; text-align: center; line-height: 60px;">您正在收看的是: </h3>	<h3 style="width: 100%; text-align: center; line-height: 60px;" id = "h31">11</h3>	<div class="recImg"><a href="javascript:play_tz()" id="tj_1"><img id="img1" src="img/a_1.jpg" width="300" height="450"></a></div>	<div id="controlD">		<!-- <a href="javascript:prePlay()">上一集</a> -->		<a href="javascript:KEY_PLAY()" id="rppp"><img src="./img/pause.png"></a>		<a href="javascript:KEY_SPEED()"><img src="./img/gogo.png"></a>		<a href="javascript:KEY_REVERSE()"><img src="./img/backback.png"></a>		<!-- <a href="javascript:nextPlay()">下一集</a> -->	</div>	<div class="rpwb">		<div class="rpnb"></div>	</div>	<div id="timeshow">		<ul>			<li id="ttime">0:00:00</li>			<li id="ctime">0:00:00</li>		</ul>	</div></div><div id="CountDown" style="position: absolute; z-index: 999; color: #fff; width: 365px; height: 180px; text-align: center; font-size: 28px; padding-top: 40px; display:none; left: 450px; top: 250px; background: url('playimages/last_quit.png');">		<div style="text-align: center; line-height: 36px;">8秒后进入下一集</div>		<table style="margin-left: 120px; margin-top: 30px;">			<tr>				<td width="20%"><a id="surefocusCD" href="javascript:playNext()" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image28','','playimages/sure1.png',1)"><img src="playimages/nextJ.png" name="Image28" width="86" height="43" border="0"></a></td>			</tr>		</table></div><!-- 进度条 --><div id="apDiv10" style="display:none; left: 430px; top: 530px;">  <table width="500" height="70" border="0" cellspacing="0" cellpadding="0">          <tr>        <td height="70" background="playimages/liveendbg.png"><table width="96%" border="0" align="center" cellpadding="0" cellspacing="0">          <tr>			 <td height="20" colspan="3" valign="top" class="livebg" id="begintime2"><div id="play_Div12">00:00:02 </div></td>          </tr>          <tr>          <td id="begintime" width="9%" height="30" class="livebb3"><center>              <div id="valcurtime">1%</div>            </center></td>            <td width="72%" height="30"><table width="98%" height="20" background="playimages/greyline.png" border="0" cellspacing="0" cellpadding="0">              <tr>                <td><!--<img src="images/blueline.png" id="barimg" style="width:0%; height:30px;">--><div id="barimg" style="overflow:hidden;width:0%; height:30px;"><img src="playimages/blueline.png"></div></td>              </tr>            </table></td>            <td width="19%" height="30" class="livebb3"><div id="endtime">00:00:00</div></td>          </tr>        </table></td>      </tr>  </table></div><!--  音量的进度图 --><div id="volume" style="visibility: hidden;" ><table width="402" height="69" background="playimages/liveinfobg.png"  border="0" align="center" cellpadding="0" cellspacing="0">  <tr>    <td><table width="90%" border="0" align="center" cellpadding="0" cellspacing="0">      <tr>        <td align="center">        <div style="width:355px;height:19px;background-image: url(playimages/volume_bg.png);">            <div style="margin-left:21px;" align="left" id="volumeBar"></div>        </div>        </td>      </tr>    </table></td>  </tr></table></div><!--  跳转到指定的时间 --><div id="apDiv101" style="display:none; top:600px; left: 430px;"><table width="500" height="63" border="0" cellspacing="0" cellpadding="0">  <tr>    <td height="63" background="playimages/liveendbg1.png"><table width="90%" border="0" align="center" cellpadding="0" cellspacing="0">          <tr>            <td colspan="6" class="livebg"><font color="#FF9900">              <div id="error"></div>            </font></td>          </tr>          <tr>            <td width="18%" class="livebb4">跳转到</td>            <td width="15%"><input type="text" name="hh" id="hh" maxlength="2" style="height:30px; width:60px;line-height:30px; text-align:center; font-size:20px;  background:#babab9; border:1px #babab9 solid;"></td>            <td width="11%" class="livebb4"> 时</td>            <td width="15%"><input type="text" name="mm" id="mm" maxlength="2" style="height:30px; width:60px;  line-height:30px; text-align:center; font-size:20px; background:#babab9; border:1px #babab9 solid;"></td>            <td width="11%" class="livebb4">分</td>            <td width="20%"><a id="surefocus" href="javascript:submittime()" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image28','','playimages/sure1.png',1)"><img src="playimages/sure.png" name="Image28" width="86" height="43" border="0"></a></td>            <td width="21%"><a href="javascript:quxiao_bar()" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image32','','playimages/quxiao1.png',1)"><img src="playimages/quxiao1.png" name="Image32" width="86" height="43" border="0"></a></td>          </tr>        </table></td>      </tr></table></div><!-- 返回图层 --><div id="apDiv14" style="display:none; left: 450px; top: 250px;">  <table width="365" height="220" border="0" cellspacing="0" cellpadding="0" background="playimages/last_quit.png">    <tr>      <td height="220"><table width="98%" border="0" align="center" cellpadding="0" cellspacing="0">        <tr>          <td id="apDiv141" height="45" colspan="4" align="center" class="allbb">您是否要退出当前收看节目？</td>        </tr>        <tr>          <td width="25%" height="70" rowspan="2" align="center">          </td>           <td align="center"><a href="javascript:tuichu()" id="myplay"><img src="playimages/last_quit1.png" width="56" height="33"></a></td>          <td align="center"><a href="javascript:jixu()"><img src="playimages/last_quit2.png" width="56" height="33"></a></td>          <td width="25%" rowspan="2" align="center">                    </td>        </tr></table></td>    </tr>  </table></div><script type="text/javascript">document.getElementById("h31").innerHTML = Authentication.CTCGetConfig("name1").substr(0,5)+"...";</script></HTML>